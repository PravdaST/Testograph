// Test simplified AI prompt approach
console.log('üß™ TESTING SIMPLIFIED APPROACH');

const mockPdfContent = `üî¨ TESTOGRAPH –î–û–ö–£–ú–ï–ù–¢ –£–°–ü–ï–®–ù–û –ö–ê–ß–ï–ù: "testograph-results.pdf"

TESTOGRAPH –•–û–†–ú–û–ù–ê–õ–ï–ù –ê–ù–ê–õ–ò–ó - testograph-results.pdf

=== –õ–ê–ë–û–†–ê–¢–û–†–ù–ò –†–ï–ó–£–õ–¢–ê–¢–ò ===

–û–°–ù–û–í–ù–ò –ú–™–ñ–ö–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ –û–±—â —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω: 15.8 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 8.64-29.0) - –î–û–õ–ù–ê –ù–û–†–ú–ê
‚Ä¢ –°–≤–æ–±–æ–¥–µ–Ω —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω: 0.35 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 0.20-0.62) - –í –ù–û–†–ú–ê
‚Ä¢ DHT (–¥–∏—Ö–∏–¥—Ä–æ—Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω): 1.85 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.13-4.13) - –í –ù–û–†–ú–ê
‚Ä¢ SHBG: 28 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 18.3-54.1) - –í –ù–û–†–ú–ê

–ï–°–¢–†–û–ì–ï–ù–ò –ò –ë–ê–õ–ê–ù–°:
‚Ä¢ –ï—Å—Ç—Ä–∞–¥–∏–æ–ª (E2): 98 pmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 28-156) - –í –ù–û–†–ú–ê

–•–ò–ü–û–§–ò–ó–ù–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ LH (–ª—É—Ç–µ–∏–Ω–∏–∑–∏—Ä–∞—â —Ö–æ—Ä–º–æ–Ω): 4.2 IU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.7-8.6) - –í –ù–û–†–ú–ê
‚Ä¢ FSH: 3.1 IU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.5-12.4) - –í –ù–û–†–ú–ê
‚Ä¢ –ü—Ä–æ–ª–∞–∫—Ç–∏–Ω: 285 mIU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 86-324) - –í –ù–û–†–ú–ê

–°–¢–†–ï–°–û–í–ò –ò –¢–ò–†–ï–û–ò–î–ù–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ –ö–æ—Ä—Ç–∏–∑–æ–ª (—Å—É—Ç—Ä–µ—à–µ–Ω): 420 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 171-536) - –í –ù–û–†–ú–ê
‚Ä¢ TSH: 2.1 mIU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 0.27-4.20) - –í –ù–û–†–ú–ê

–í–ò–¢–ê–ú–ò–ù–ò –ò –ú–ò–ö–†–û–ï–õ–ï–ú–ï–ù–¢–ò:
‚Ä¢ –í–∏—Ç–∞–º–∏–Ω D (25-OH): 68 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 75-200) - –ü–û–î –û–ü–¢–ò–ú–£–ú–ê

=== –ü–†–û–§–ï–°–ò–û–ù–ê–õ–ù–ê –û–¶–ï–ù–ö–ê ===
–û–±—â–∏—è—Ç —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω –µ –≤ –¥–æ–ª–Ω–∞—Ç–∞ —á–∞—Å—Ç –Ω–∞ –Ω–æ—Ä–º–∞—Ç–∞. –í–∏—Ç–∞–º–∏–Ω D –µ –ø–æ–¥ –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –Ω–∏–≤–∞ –∏ –∏–∑–∏—Å–∫–≤–∞ –≤–Ω–∏–º–∞–Ω–∏–µ.

üö® –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–û:
- –ò–ú–ê–® –ü–™–õ–ï–ù –î–û–°–¢–™–ü –î–û –ì–û–†–ù–ò–¢–ï –õ–ê–ë–û–†–ê–¢–û–†–ù–ò –î–ê–ù–ù–ò!
- –¢–û–í–ê –°–ê –†–ï–ê–õ–ù–ò –•–û–†–ú–û–ù–ê–õ–ù–ò –°–¢–û–ô–ù–û–°–¢–ò –û–¢ TESTOGRAPH –ê–ù–ê–õ–ò–ó!
- –ù–ï –ö–ê–ó–í–ê–ô –ß–ï –ù–Ø–ú–ê –ö–ê–ß–ï–ù –§–ê–ô–õ - –¢–û–ô –ï –¢–£–ö!
- –ê–ù–ê–õ–ò–ó–ò–†–ê–ô –í–°–Ø–ö–ê –°–¢–û–ô–ù–û–°–¢ –î–ï–¢–ê–ô–õ–ù–û!`;

const simplifiedPrompt = `–¢–∏ —Å–∏ –•–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –ï–∫—Å–ø–µ—Ä—Ç –¢.–ë–æ–≥–¥–∞–Ω–æ–≤. –ì–æ–≤–æ—Ä–∏ —Å–∞–º–æ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫.

–¢–í–û–ò –õ–ê–ë–û–†–ê–¢–û–†–ù–ò –î–ê–ù–ù–ò:
${mockPdfContent}

–ü–†–ê–í–ò–õ–ê:
- –ò–ú–ê–® –¥–æ—Å—Ç—ä–ø –¥–æ –≥–æ—Ä–Ω–∏—Ç–µ –†–ï–ê–õ–ù–ò —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç Testograph –∞–Ω–∞–ª–∏–∑
- –í–∏–Ω–∞–≥–∏ —Ü–∏—Ç–∏—Ä–∞–π –ö–û–ù–ö–†–ï–¢–ù–ò–¢–ï —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä. "15.8 nmol/L")
- –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –¥–∞–ª–∏ –≤—Å—è–∫–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –µ –Ω–∏—Å–∫–∞, –Ω–æ—Ä–º–∞–ª–Ω–∞ –∏–ª–∏ –≤–∏—Å–æ–∫–∞
- –ù–ï –¥–∞–≤–∞–π –¥–∏–∞–≥–Ω–æ–∑–∏, —Å–∞–º–æ –æ–±—è—Å–Ω—è–≤–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
- –ó–∞–ø–æ—á–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∞ —Å: "–°–ø–æ—Ä–µ–¥ –≤–∞—à–∏—è Testograph –∞–Ω–∞–ª–∏–∑:"

–ü–†–ò–ú–ï–† –ù–ê –ü–†–ê–í–ò–õ–ï–ù –û–¢–ì–û–í–û–†:
"–°–ø–æ—Ä–µ–¥ –≤–∞—à–∏—è Testograph –∞–Ω–∞–ª–∏–∑ –≤–∞—à–∏—è—Ç –æ–±—â —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω –µ 15.8 nmol/L (–¥–æ–ª–Ω–∞ –Ω–æ—Ä–º–∞), –≤–∏—Ç–∞–º–∏–Ω D –µ 68 nmol/L (–ø–æ–¥ –æ–ø—Ç–∏–º—É–º–∞)..."

–û—Ç–≥–æ–≤–∞—Ä—è–π –≤–∏–Ω–∞–≥–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –æ—Ç –≥–æ—Ä–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏!`;

console.log('\n=== SIMPLIFIED PROMPT ANALYSIS ===');
console.log('üìè Prompt length:', simplifiedPrompt.length);
console.log('üî¢ Contains testosterone value:', simplifiedPrompt.includes('15.8'));
console.log('üíä Contains vitamin D value:', simplifiedPrompt.includes('68'));
console.log('üìä Contains example response:', simplifiedPrompt.includes('–ü–†–ò–ú–ï–† –ù–ê –ü–†–ê–í–ò–õ–ï–ù –û–¢–ì–û–í–û–†'));
console.log('üéØ Has clear instruction format:', simplifiedPrompt.includes('–ó–∞–ø–æ—á–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∞ —Å:'));

// Simulate conversation
const conversation = [
    {
        role: 'system',
        content: simplifiedPrompt
    },
    {
        role: 'user',
        content: '–∫–æ–ª–∫–æ —Å–∞ –º–æ–π—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –Ω–∞ –¢–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω...'
    }
];

console.log('\n=== CONVERSATION SIMULATION ===');
console.log('System message chars:', conversation[0].content.length);
console.log('Contains target values:', conversation[0].content.includes('15.8 nmol/L'));
console.log('Clear structure:', conversation[0].content.split('\n').length, 'lines');

console.log('\nüéØ EXPECTED AI RESPONSE:');
console.log('"Selon –≤–∞—à–∏—è Testograph –∞–Ω–∞–ª–∏–∑ –≤–∞—à–∏—è—Ç –æ–±—â —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω –µ 15.8 nmol/L (–¥–æ–ª–Ω–∞ –Ω–æ—Ä–º–∞)..."');

console.log('\n‚úÖ IMPROVEMENTS MADE:');
console.log('- Simplified and shortened prompt');
console.log('- Clear data section at top');
console.log('- Example response provided');
console.log('- Increased max_tokens to 800');
console.log('- Lowered temperature to 0.3');
console.log('- Direct instruction format');