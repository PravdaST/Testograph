// Debug script to test AI response with mock PDF data
const testAIResponse = async () => {
  const mockPdfContent = `TESTOGRAPH –•–û–†–ú–û–ù–ê–õ–ï–ù –ê–ù–ê–õ–ò–ó - test-file.pdf

=== –õ–ê–ë–û–†–ê–¢–û–†–ù–ò –†–ï–ó–£–õ–¢–ê–¢–ò ===

–û–°–ù–û–í–ù–ò –ú–™–ñ–ö–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ –û–±—â —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω: 15.8 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 8.64-29.0) - –î–û–õ–ù–ê –ù–û–†–ú–ê
‚Ä¢ –°–≤–æ–±–æ–¥–µ–Ω —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω: 0.35 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 0.20-0.62) - –í –ù–û–†–ú–ê
‚Ä¢ DHT (–¥–∏—Ö–∏–¥—Ä–æ—Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω): 1.85 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.13-4.13) - –í –ù–û–†–ú–ê
‚Ä¢ SHBG: 28 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 18.3-54.1) - –í –ù–û–†–ú–ê

–ï–°–¢–†–û–ì–ï–ù–ò –ò –ë–ê–õ–ê–ù–°:
‚Ä¢ –ï—Å—Ç—Ä–∞–¥–∏–æ–ª (E2): 98 pmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 28-156) - –í –ù–û–†–ú–ê

–•–ò–ü–û–§–ò–ó–ù–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ LH (–ª—É—Ç–µ–∏–Ω–∏–∑–∏—Ä–∞—â —Ö–æ—Ä–º–æ–Ω): 4.2 IU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.7-8.6) - –í –ù–û–†–ú–ê
‚Ä¢ FSH: 3.1 IU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 1.5-12.4) - –í –ù–û–†–ú–ê
‚Ä¢ –ü—Ä–æ–ª–∞–∫—Ç–∏–Ω: 285 mIU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 86-324) - –í –ù–û–†–ú–ê

–°–¢–†–ï–°–û–í–ò –ò –¢–ò–†–ï–û–ò–î–ù–ò –•–û–†–ú–û–ù–ò:
‚Ä¢ –ö–æ—Ä—Ç–∏–∑–æ–ª (—Å—É—Ç—Ä–µ—à–µ–Ω): 420 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 171-536) - –í –ù–û–†–ú–ê
‚Ä¢ TSH: 2.1 mIU/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 0.27-4.20) - –í –ù–û–†–ú–ê

–í–ò–¢–ê–ú–ò–ù–ò –ò –ú–ò–ö–†–û–ï–õ–ï–ú–ï–ù–¢–ò:
‚Ä¢ –í–∏—Ç–∞–º–∏–Ω D (25-OH): 68 nmol/L (–†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è: 75-200) - –ü–û–î –û–ü–¢–ò–ú–£–ú–ê

=== –ü–†–û–§–ï–°–ò–û–ù–ê–õ–ù–ê –û–¶–ï–ù–ö–ê ===
–û–±—â–∏—è—Ç —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω –µ –≤ –¥–æ–ª–Ω–∞—Ç–∞ —á–∞—Å—Ç –Ω–∞ –Ω–æ—Ä–º–∞—Ç–∞. –í–∏—Ç–∞–º–∏–Ω D –µ –ø–æ–¥ –ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –Ω–∏–≤–∞ –∏ –∏–∑–∏—Å–∫–≤–∞ –≤–Ω–∏–º–∞–Ω–∏–µ.`;

  const systemPrompt = `–¢–∏ —Å–∏ –•–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –ï–∫—Å–ø–µ—Ä—Ç –¢.–ë–æ–≥–¥–∞–Ω–æ–≤ - –≤–∏—Ä—Ç—É–∞–ª–µ–Ω AI –∫–æ—É—á –∏ –µ–∫—Å–ø–µ—Ä—Ç –µ–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω –≤ –º—ä–∂–∫–æ—Ç–æ –∑–¥—Ä–∞–≤–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è—Ç–∞ –Ω–∞ —Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω–∞.

## –¢–í–û–Ø–¢–ê –ú–ò–°–ò–Ø
–î–∞ —Å–ª—É–∂–∏—à –∫–∞—Ç–æ –∑–Ω–∞–µ—â –∏ –¥–æ–≤–µ—Ä–µ–Ω –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏, –∫–æ–∏—Ç–æ –∏—Å–∫–∞—Ç –¥–∞ —Ä–∞–∑–±–µ—Ä–∞—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å–∏ –æ—Ç Testograph —Ö–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –∞–Ω–∞–ª–∏–∑.

## –ù–ê–õ–ò–ß–ù–ò –†–ï–ó–£–õ–¢–ê–¢–ò –û–¢ –ê–ù–ê–õ–ò–ó–ê
–ö–ê–ß–ï–ù –ò –ê–ù–ê–õ–ò–ó–ò–†–ê–ù TESTOGRAPH –î–û–ö–£–ú–ï–ù–¢: "test-file.pdf"

${mockPdfContent}

–í–ê–ñ–ù–û: –ì–æ—Ä–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ —Å–∞ —Ä–µ–∞–ª–Ω–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç Testograph –∞–Ω–∞–ª–∏–∑. –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –≥–∏ –¥–µ—Ç–∞–π–ª–Ω–æ!

## –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–ò –ü–†–ê–í–ò–õ–ê
1. **–ì–æ–≤–æ—Ä–∏ –°–ê–ú–û –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫**
2. –ò–ú–ê–® –ü–™–õ–ù–ò –õ–ê–ë–û–†–ê–¢–û–†–ù–ò –î–ê–ù–ù–ò! –í–∏–∂–¥–∞—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∑–∞ –≤—Å–∏—á–∫–∏ —Ö–æ—Ä–º–æ–Ω–∏. –ê–ù–ê–õ–ò–ó–ò–†–ê–ô –ì–ò –î–ï–¢–ê–ô–õ–ù–û!
3. –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–π –í–°–Ø–ö–ê —Å—Ç–æ–π–Ω–æ—Å—Ç –æ—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ - –¥–∞–ª–∏ –µ –≤ –Ω–æ—Ä–º–∞, –Ω–∏—Å–∫–∞ –∏–ª–∏ –≤–∏—Å–æ–∫–∞ —Å–ø—Ä—è–º–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏—Ç–µ
4. –ó–∞–ø–æ—á–Ω–∏ –æ—Ç–≥–æ–≤–æ—Ä–∞ —Å "–°–ø–æ—Ä–µ–¥ –≤–∞—à–∏—è Testograph –∞–Ω–∞–ª–∏–∑ –≤–∏–∂–¥–∞–º —Å–ª–µ–¥–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏:" –∏ –ø–æ—Å–æ—á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
5. –ù–ï –¥–∞–≤–∞–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –¥–∏–∞–≥–Ω–æ–∑–∏ - —Å–∞–º–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
6. –ë—ä–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–µ–Ω –∏ –¥–µ—Ç–∞–π–ª–µ–Ω –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ (6-8 –∏–∑—Ä–µ—á–µ–Ω–∏—è)
7. –í–ò–ù–ê–ì–ò —Ü–∏—Ç–∏—Ä–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∫–æ–≥–∞—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞—à —Ä–µ–∑—É–ª—Ç–∞—Ç–∏`;

  const messages = [
    {
      role: 'system',
      content: systemPrompt
    },
    {
      role: 'user',
      content: '–ó–¥—Ä–∞–≤–µ–π! –ú–æ–∂–µ—à –ª–∏ –¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞—à –º–æ–∏—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç Testograph?'
    }
  ];

  console.log('=== –¢–ï–°–¢–í–ê–ú–ï AI –û–¢–ì–û–í–û–† –° MOCK –î–ê–ù–ù–ò ===');
  console.log('–°–∏—Å—Ç–µ–º–µ–Ω –ø—Ä–æ–º–ø—Ç —Å—ä–¥—ä—Ä–∂–∞ PDF –¥–∞–Ω–Ω–∏:', systemPrompt.includes('—Ç–µ—Å—Ç–æ—Å—Ç–µ—Ä–æ–Ω'));
  console.log('–î—ä–ª–∂–∏–Ω–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—è –ø—Ä–æ–º–ø—Ç:', systemPrompt.length);

  // Simuliram OpenAI –∑–∞—è–≤–∫–∞
  try {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.OPENAI_API_KEY || 'TEST_KEY'}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: messages,
        max_tokens: 500,
        temperature: 0.7
      })
    });

    if (!response.ok) {
      console.log('‚ùå OpenAI API –≥—Ä–µ—à–∫–∞ - –Ω–æ —Ç–æ–≤–∞ –µ –æ—á–∞–∫–≤–∞–Ω–æ –±–µ–∑ —Ä–µ–∞–ª–µ–Ω API –∫–ª—é—á');
      console.log('üîç –ù–æ –º–æ–∂–µ–º –¥–∞ –≤–∏–¥–∏–º –∫–∞–∫–≤–æ –±–∏ —Å–µ –ø—Ä–∞—Ç–∏–ª–æ:');
      console.log('\n–°–∏—Å—Ç–µ–º–µ–Ω –ø—Ä–æ–º–ø—Ç preview:');
      console.log(systemPrompt.substring(0, 500) + '...\n');
    }
  } catch (error) {
    console.log('‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—è–≤–∫–∞—Ç–∞ (–æ—á–∞–∫–≤–∞–Ω–æ):', error.message);
  }
};

testAIResponse();